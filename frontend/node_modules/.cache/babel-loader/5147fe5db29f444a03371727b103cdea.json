{"ast":null,"code":"class Api {\n  constructor(options) {\n    this._address = options.address;\n  }\n\n  _checkServerResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } // Если происходит ошибка, отклоняем промис\n\n\n    return Promise.reject(`${res.status}`);\n  }\n\n  register(password, email) {\n    return fetch(`${BASE_URL}/signup`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        password: password,\n        email: email\n      })\n    });\n  }\n\n  authorization(password, email) {\n    return fetch(`${BASE_URL}/signin`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => this._checkServerResponse(res)).then(data => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        return data.token;\n      }\n    });\n  }\n\n  checkToken(token) {\n    return fetch(`${BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => this._checkServerResponse(res)).then(data => data);\n  }\n\n}\n\nconst auth = new Auth({\n  address: 'https://auth.nomoreparties.co'\n});\nexport default api;","map":{"version":3,"sources":["/Users/AleksiTarasov/Desktop/develop/react-mesto-auth/src/utils/auth.js"],"names":["Api","constructor","options","_address","address","_checkServerResponse","res","ok","json","Promise","reject","status","register","password","email","fetch","BASE_URL","method","headers","body","JSON","stringify","authorization","then","data","token","localStorage","setItem","checkToken","auth","Auth","api"],"mappings":"AAAA,MAAMA,GAAN,CAAU;AACNC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKC,QAAL,GAAgBD,OAAO,CAACE,OAAxB;AACH;;AACLC,EAAAA,oBAAoB,CAACC,GAAD,EAAM;AACtB,QAAIA,GAAG,CAACC,EAAR,EAAY;AACR,aAAOD,GAAG,CAACE,IAAJ,EAAP;AACH,KAHqB,CAItB;;;AACA,WAAOC,OAAO,CAACC,MAAR,CAAgB,GAAEJ,GAAG,CAACK,MAAO,EAA7B,CAAP;AACH;;AACDC,EAAAA,QAAQ,CAACC,QAAD,EAAWC,KAAX,EAAkB;AACtB,WAAOC,KAAK,CAAE,GAAEC,QAAS,SAAb,EAAuB;AAC/BC,MAAAA,MAAM,EAAE,MADuB;AAE/BC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFsB;AAM/BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CACF;AAACR,QAAAA,QAAQ,EAAEA,QAAX;AACAC,QAAAA,KAAK,EAAEA;AADP,OADE;AANyB,KAAvB,CAAZ;AAWH;;AAEDQ,EAAAA,aAAa,CAACT,QAAD,EAAWC,KAAX,EAAiB;AAC1B,WAAOC,KAAK,CAAE,GAAEC,QAAS,SAAb,EAAuB;AAC/BC,MAAAA,MAAM,EAAE,MADuB;AAE/BC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB;AAFX,OAFsB;AAM/BC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,QAAAA,KAAF;AAASD,QAAAA;AAAT,OAAf;AANyB,KAAvB,CAAL,CAQFU,IARE,CAQGjB,GAAG,IAAI,KAAKD,oBAAL,CAA0BC,GAA1B,CARV,EASFiB,IATE,CASIC,IAAD,IAAU;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAgB;AACZC,QAAAA,YAAY,CAACC,OAAb,CAAqB,KAArB,EAA4BH,IAAI,CAACC,KAAjC;AACA,eAAOD,IAAI,CAACC,KAAZ;AACH;AACJ,KAdE,CAAP;AAeH;;AAEDG,EAAAA,UAAU,CAACH,KAAD,EAAO;AACb,WAAOV,KAAK,CAAE,GAAEC,QAAS,WAAb,EAAyB;AACjCC,MAAAA,MAAM,EAAE,KADyB;AAEjCC,MAAAA,OAAO,EAAE;AACL,kBAAU,kBADL;AAEL,wBAAgB,kBAFX;AAGL,yBAAkB,UAASO,KAAM;AAH5B;AAFwB,KAAzB,CAAL,CAQFF,IARE,CAQGjB,GAAG,IAAI,KAAKD,oBAAL,CAA0BC,GAA1B,CARV,EASFiB,IATE,CASIC,IAAD,IAAUA,IATb,CAAP;AAUH;;AAtDS;;AAwDV,MAAMK,IAAI,GAAG,IAAIC,IAAJ,CAAS;AAClB1B,EAAAA,OAAO,EAAE;AADS,CAAT,CAAb;AAIA,eAAe2B,GAAf","sourcesContent":["class Api {\n    constructor(options) {\n        this._address = options.address\n    }\n_checkServerResponse(res) {\n    if (res.ok) {\n        return res.json()\n    }\n    // Если происходит ошибка, отклоняем промис\n    return Promise.reject(`${res.status}`)\n}\nregister(password, email) {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(\n            {password: password,\n            email: email}\n        )\n    })\n}\n\nauthorization(password, email){\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n    })\n        .then(res => this._checkServerResponse(res))\n        .then((data) => {\n            if (data.token) {\n                localStorage.setItem('jwt', data.token)\n                return data.token\n            }\n        })\n}\n\ncheckToken(token){\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n        },\n    })\n        .then(res => this._checkServerResponse(res))\n        .then((data) => data)\n}\n}\nconst auth = new Auth({\n    address: 'https://auth.nomoreparties.co',\n})\n\nexport default api"]},"metadata":{},"sourceType":"module"}